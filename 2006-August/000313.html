<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] User-mode iSER
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2006-August/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20User-mode%20iSER&In-Reply-To=%3C5eb093080608060400m1ab5934ajf884f12e16341ad6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000311.html">
   <LINK REL="Next"  HREF="000314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] User-mode iSER</H1>
    <B>Alexander Nezhinsky</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20User-mode%20iSER&In-Reply-To=%3C5eb093080608060400m1ab5934ajf884f12e16341ad6%40mail.gmail.com%3E"
       TITLE="[Stgt-devel] User-mode iSER">nezhinsky at gmail.com
       </A><BR>
    <I>Sun Aug  6 13:00:02 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000311.html">[Stgt-devel] User-mode iSER
</A></li>
        <LI>Next message: <A HREF="000314.html">[Stgt-devel] User-mode iSER
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#313">[ date ]</a>
              <a href="thread.html#313">[ thread ]</a>
              <a href="subject.html#313">[ subject ]</a>
              <a href="author.html#313">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> tgt thinks that it does a write-back. The initiators can use
</I>&gt;<i> SYNCHRONIZE_CACHE, ordering write, etc for data integrity. And when
</I>&gt;<i> the target code is asked to write the data to storage permanently, we
</I>&gt;<i> can use fsync, msync, etc.
</I>

As far as I understand, SYNCHRONIZE_CACHE command is not intended as a tool
to be used by the initiators to avoid possible cache-related data
corruption. It rather should be used &quot;to ensure that the data was written
and any detected errors reported&quot; (citation from SBC-2 spec).
In case of power-off, h/w failures etc. the target should guarantee that all
cached data are written to the medium (or backed up, saved etc.)  regardless
of the initiator's actions.
At some points (presumably related to application semantics) initiator may
be interested to receive either success status or all possible errors
resulting from the actual I/O, but this command should not be used to
guarantee data integrity.


&gt;<i> &gt; &gt; &gt; &gt; Modern operating systems and applications
</I>
&gt;<i> &gt; (like file systems) does not
</I>&gt;<i> &gt; &gt; &gt; &gt; need help from battery-backed memory to enjoy
</I>&gt;<i> &gt; &gt; write-behind cache on
</I>&gt;<i> &gt; &gt; &gt; &gt; SAN target devices for better performance without data corruption
</I>&gt;<i> &gt; &gt; &gt; &gt; risks. So page cache is always useful.
</I>&gt;<i> &gt; &gt; &gt;
</I>

How does linux cope with this? I never saw anything that &quot;funky&quot; in the scsi
command logs sent by a linux initiator.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/stgt-devel/attachments/20060806/f5c2a21b/attachment.html">https://lists.berlios.de/pipermail/stgt-devel/attachments/20060806/f5c2a21b/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000311.html">[Stgt-devel] User-mode iSER
</A></li>
	<LI>Next message: <A HREF="000314.html">[Stgt-devel] User-mode iSER
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#313">[ date ]</a>
              <a href="thread.html#313">[ thread ]</a>
              <a href="subject.html#313">[ subject ]</a>
              <a href="author.html#313">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
