<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] I have found a small problem in the MMC code ...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20I%20have%20found%20a%20small%20problem%20in%20the%20MMC%20code%20...&In-Reply-To=%3Cc9a3e4540807281542o70b8d71bp552d5ea3b7be0c05%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001932.html">
   <LINK REL="Next"  HREF="001933.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] I have found a small problem in the MMC code ...</H1>
    <B>ronnie sahlberg</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20I%20have%20found%20a%20small%20problem%20in%20the%20MMC%20code%20...&In-Reply-To=%3Cc9a3e4540807281542o70b8d71bp552d5ea3b7be0c05%40mail.gmail.com%3E"
       TITLE="[Stgt-devel] I have found a small problem in the MMC code ...">ronniesahlberg at gmail.com
       </A><BR>
    <I>Tue Jul 29 00:42:18 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001932.html">[Stgt-devel] I have found a small problem in the MMC code ...
</A></li>
        <LI>Next message: <A HREF="001933.html">[Stgt-devel] I have verified that my changes to smc.c work with the	current SSC code and the MMC code ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1937">[ date ]</a>
              <a href="thread.html#1937">[ thread ]</a>
              <a href="subject.html#1937">[ subject ]</a>
              <a href="author.html#1937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Can you send me a network trace of this?

Since Read TOC returns the blob size as the first two bytes of data it
should not return
CHECK CONDITION even if there is more data than the initiator asked for.

I think this command might return CHECK CONDITION if there is no disk
in the drive, or if there is a
blank disk.

Please send me a sample capture to test with and Ill compare to a few
read dvd drives.



On Tue, Jul 29, 2008 at 7:16 AM, Richard Sharpe
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">realrichardsharpe at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I have found what I think is a small problem in the MMC code, although
</I>&gt;<i> I am not sure.
</I>&gt;<i>
</I>&gt;<i> I am trying to use cdrecord to write to a DVD Jukebox I have set up
</I>&gt;<i> following Ronnie's example and my code changes.
</I>&gt;<i>
</I>&gt;<i> When the client asks for the TOC, it seems to give us too small an
</I>&gt;<i> allocation length (four bytes) and of course, we give it back only
</I>&gt;<i> what is asked for ... it looks like maybe cdrecord is doing this,
</I>&gt;<i> because the Linux kernel seems to offer a buffer of 12 (at least that
</I>&gt;<i> is what the code says).
</I>&gt;<i>
</I>&gt;<i> In any event, this causes the first write that CD record requests to
</I>&gt;<i> return a CHECK_CONDITION. cdrecord then recovers and the writing of my
</I>&gt;<i> 8GB DVD :-) completes ...
</I>&gt;<i>
</I>&gt;<i> I will have to check the specs carefully, but I wonder if we should be
</I>&gt;<i> returning CHECK_CONDITION as the response to the request for the
</I>&gt;<i> request to read the TOC/PMA/ATIP or is the client supposed to check
</I>&gt;<i> that there was more data than the buffer could hold and then reissue
</I>&gt;<i> the command?
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Stgt-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">Stgt-devel at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">https://lists.berlios.de/mailman/listinfo/stgt-devel</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001932.html">[Stgt-devel] I have found a small problem in the MMC code ...
</A></li>
	<LI>Next message: <A HREF="001933.html">[Stgt-devel] I have verified that my changes to smc.c work with the	current SSC code and the MMC code ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1937">[ date ]</a>
              <a href="thread.html#1937">[ thread ]</a>
              <a href="subject.html#1937">[ subject ]</a>
              <a href="author.html#1937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
