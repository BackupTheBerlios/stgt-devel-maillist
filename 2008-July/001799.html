<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] [PATCH] Use correct return value of lseek
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20%5BPATCH%5D%20Use%20correct%20return%20value%20of%20lseek&In-Reply-To=%3C48821AFC.3050004%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001795.html">
   <LINK REL="Next"  HREF="001802.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] [PATCH] Use correct return value of lseek</H1>
    <B>Albert Pauw</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20%5BPATCH%5D%20Use%20correct%20return%20value%20of%20lseek&In-Reply-To=%3C48821AFC.3050004%40gmail.com%3E"
       TITLE="[Stgt-devel] [PATCH] Use correct return value of lseek">albert.pauw at gmail.com
       </A><BR>
    <I>Sat Jul 19 18:49:00 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001795.html">[Stgt-devel] [PATCH] Use correct return value of lseek
</A></li>
        <LI>Next message: <A HREF="001802.html">[Stgt-devel] [PATCH] Use correct return value of lseek
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1799">[ date ]</a>
              <a href="thread.html#1799">[ thread ]</a>
              <a href="subject.html#1799">[ subject ]</a>
              <a href="author.html#1799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>FUJITA Tomonori wrote:
&gt;<i> On Fri, 18 Jul 2008 18:37:24 +0200
</I>&gt;<i> Albert Pauw &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">albert.pauw at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> Just a small patch.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The wrong return value was checked in the if statement.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Albert
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --- bs_ssc.c	2008-07-17 19:19:10.000000000 +0200
</I>&gt;&gt;<i> +++ bs_ssc.c.new	2008-07-18 18:34:15.000000000 +0200
</I>&gt;&gt;<i> @@ -65,7 +65,7 @@
</I>&gt;&gt;<i>  	case REZERO_UNIT:
</I>&gt;&gt;<i>  		rew = lseek(fd, 0, SEEK_SET);
</I>&gt;&gt;<i>  		curr_pos = lseek(fd, 0, SEEK_CUR);
</I>&gt;&gt;<i> -		if (ret)
</I>&gt;&gt;<i> +		if (rew)
</I>&gt;&gt;<i>  			set_medium_error(&amp;result, &amp;key, &amp;asc);
</I>&gt;&gt;<i>  		eprintf(&quot;Rewind Successful, File Pointer at %&quot; PRIu64&quot;,%m\n&quot;,
</I>&gt;&gt;<i>  			curr_pos);
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I think that the fix is right but what's for the second lseek? Can we
</I>&gt;<i> remove it?
</I>&gt;<i>
</I>&gt;<i>   
</I>I believe the second seek is put in to be used only by the eprintf 
function, just to check the
current position and show that the seek was succesfull.

Since it is still work in progress and anything near finished I would 
leave it in for the moment.

Albert

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001795.html">[Stgt-devel] [PATCH] Use correct return value of lseek
</A></li>
	<LI>Next message: <A HREF="001802.html">[Stgt-devel] [PATCH] Use correct return value of lseek
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1799">[ date ]</a>
              <a href="thread.html#1799">[ thread ]</a>
              <a href="subject.html#1799">[ subject ]</a>
              <a href="author.html#1799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
