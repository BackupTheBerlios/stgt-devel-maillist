<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new version of iscsi target?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2005-December/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20Ang%3A%20Re%3A%20%5BStgt-devel%5D%20Re%3A%20%5BIscsitarget-devel%5D%20stgt%20a%20new%20version%0A%20of%20iscsi%20target%3F&In-Reply-To=%3C4398850D.8070102%40cs.wisc.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000175.html">
   <LINK REL="Next"  HREF="000151.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new version of iscsi target?</H1>
    <B>Mike Christie</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20Ang%3A%20Re%3A%20%5BStgt-devel%5D%20Re%3A%20%5BIscsitarget-devel%5D%20stgt%20a%20new%20version%0A%20of%20iscsi%20target%3F&In-Reply-To=%3C4398850D.8070102%40cs.wisc.edu%3E"
       TITLE="Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new version of iscsi target?">michaelc at cs.wisc.edu
       </A><BR>
    <I>Thu Dec  8 20:10:05 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000175.html">Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new version of iscsi target?
</A></li>
        <LI>Next message: <A HREF="000151.html">Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new	version of iscsi target?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#147">[ date ]</a>
              <a href="thread.html#147">[ thread ]</a>
              <a href="subject.html#147">[ subject ]</a>
              <a href="author.html#147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Vladislav Bolkhovitin wrote:
&gt;<i>  - Scst has some performance advantages over stgt, at least, on hardware 
</I>&gt;<i> targets, because it allows internal handling in SIRQ context as well as 
</I>&gt;<i> doesn't need user space program, so it eliminates additi
</I>&gt;<i> switches (at least 3 per command for WRITEs and 2 per command for reads 
</I>&gt;<i> plus switches to user space daemon, probably, 2 per command). 5 context 
</I>&gt;<i> switches per command looks too much for me, especially considering how 
</I>&gt;<i> little work is done on each context. It means ~15000 CS/sec on regular 
</I>&gt;<i> 200Mb/sec link with 64K block size. Additionally, kernel only commands 
</I>&gt;<i> execution allows direct access to page cache, which is GREAT performance 
</I>&gt;<i> improvement, because in architecture with user space daemon the data 
</I>&gt;<i> should be copied several times between kernel and user space. Or, do I 
</I>&gt;<i> miss anything?
</I>
Userspace only occurs for READ/WRITEs. So for REPORT_LUNS, TUR, etc 
where performance is not a factor.

Also is the page cache comment in reference to us using the page cache 
for our reads and writes or I am not sure why you wrote that if you do 
not do it right now.

&gt;<i> 
</I>&gt;<i>  From other side, stgt has not too much advantages over scst. 
</I>
Hey, we just started and have not had too much time.

&gt;<i> Actually, we would greatly appreciate if Mike or Christoph will tell us 
</I>&gt;<i> what is so wrong in scst on their opinion, so they started they own new 
</I>&gt;<i> project. (I'm not considering motivation like &quot;I want to make my own in 
</I>&gt;<i> any case&quot; seriously). Is scst too complicated? Do you think stgt will be 
</I>&gt;<i> simpler with all those features implemented?
</I>&gt;<i> 
</I>
Didn't we go over this? To get SCST ready for mainline we would have had 
a large cleanup effort. I started this and sent you a patch to begin the 
cleanup. In the end some of the scsi people liked the idea of throwing 
the non-read/write command to userspace and to do this we just decided 
to start over but I have been cutting and pasting your code and cleaning 
it up as I add more stuff.

Simmer down :) If you had just gotton your code ready when christoph 
asked a year ago we would never have had this problem and I would be 
sending you patches to remove the scsi_request usage as we speak.


-------------------------------------------------------
This SF.net email is sponsored by: Splunk Inc. Do you grep through log files
for problems?  Stop!  Download the new AJAX search engine that makes
searching your log files as easy as surfing the  web.  DOWNLOAD SPLUNK!
<A HREF="http://ads.osdn.com/?ad_id=7637&amp;alloc_id=16865&amp;op=click">http://ads.osdn.com/?ad_id=7637&amp;alloc_id=16865&amp;op=click</A>
_______________________________________________
Iscsitarget-devel mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">Iscsitarget-devel at lists.sourceforge.net</A>
<A HREF="https://lists.sourceforge.net/lists/listinfo/iscsitarget-devel">https://lists.sourceforge.net/lists/listinfo/iscsitarget-devel</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000175.html">Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new version of iscsi target?
</A></li>
	<LI>Next message: <A HREF="000151.html">Ang: Re: [Stgt-devel] Re: [Iscsitarget-devel] stgt a new	version of iscsi target?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#147">[ date ]</a>
              <a href="thread.html#147">[ thread ]</a>
              <a href="subject.html#147">[ subject ]</a>
              <a href="author.html#147">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
