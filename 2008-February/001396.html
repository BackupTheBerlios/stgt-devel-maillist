<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] Different throughput numbers on SLES 10 and	RHEL	5.1
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20Different%20throughput%20numbers%20on%20SLES%2010%20and%0A%09RHEL%095.1&In-Reply-To=%3C20080212111715.GC18518%40porcupine.cita.utoronto.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001395.html">
   <LINK REL="Next"  HREF="001397.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] Different throughput numbers on SLES 10 and	RHEL	5.1</H1>
    <B>Robin Humble</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20Different%20throughput%20numbers%20on%20SLES%2010%20and%0A%09RHEL%095.1&In-Reply-To=%3C20080212111715.GC18518%40porcupine.cita.utoronto.ca%3E"
       TITLE="[Stgt-devel] Different throughput numbers on SLES 10 and	RHEL	5.1">robin.humble+stgt at anu.edu.au
       </A><BR>
    <I>Tue Feb 12 12:17:15 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001395.html">[Stgt-devel] Different throughput numbers on SLES 10 and RHEL	5.1
</A></li>
        <LI>Next message: <A HREF="001397.html">[Stgt-devel] Different throughput numbers on SLES 10 and RHEL	5.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1396">[ date ]</a>
              <a href="thread.html#1396">[ thread ]</a>
              <a href="subject.html#1396">[ subject ]</a>
              <a href="author.html#1396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Feb 12, 2008 at 12:02:05PM +0100, Bart Van Assche wrote:
&gt;<i>On Feb 12, 2008 10:59 AM, Erez Zilber &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">erezz at voltaire.com</A>&gt; wrote:
</I>&gt;&gt;<i> I'm using the latest stgt release (tgt-20071227) and I see different
</I>&gt;&gt;<i> throughput numbers for READ commands on SLES 10  &amp; RHEL 5.1. I'm using
</I>&gt;&gt;<i> stgt with iSCSI over iSER.
</I>&gt;<i>Which numbers does ib_write_bw report between initiator and target for
</I>&gt;<i>the two different Linux distributions ?
</I>
are you loading mthca with
  options ib_mthca tune_pci=1
so that lspci -vvv says:
  MaxReadReq 4096 bytes
for the IB card?
some distros seem to have this on by default, and others don't.
with the normal default of MaxReadReq 128(?) total IB bandwidth is
about halved.

you could look at lspci -vvv between the 2 distros and check.

as Bart says you should prob be able to see that difference with the ib
bw utils too, but in my testing I used netpipe's NPmpi with OpenMPI for
bandwidth tests.

looking at /proc/interrupts between the 2 distros might also tell you
something. I haven't tried pinning interrupts to cores and don't know
what the distros do by default. possibly msi_x=1 as another option to
ib_mthca might help too.

cheers,
robin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001395.html">[Stgt-devel] Different throughput numbers on SLES 10 and RHEL	5.1
</A></li>
	<LI>Next message: <A HREF="001397.html">[Stgt-devel] Different throughput numbers on SLES 10 and RHEL	5.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1396">[ date ]</a>
              <a href="thread.html#1396">[ thread ]</a>
              <a href="subject.html#1396">[ subject ]</a>
              <a href="author.html#1396">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
