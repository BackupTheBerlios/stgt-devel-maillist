<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20%5BPATCH%5D%20in%20tgt-setup-lun%3A%20fix%20check%20if%20tgtd%20daemon%0A%20is%09running&In-Reply-To=%3C47F9D828.6070406%40voltaire.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001499.html">
   <LINK REL="Next"  HREF="001501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running</H1>
    <B>Doron Shoham</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20%5BPATCH%5D%20in%20tgt-setup-lun%3A%20fix%20check%20if%20tgtd%20daemon%0A%20is%09running&In-Reply-To=%3C47F9D828.6070406%40voltaire.com%3E"
       TITLE="[Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running">dorons at voltaire.com
       </A><BR>
    <I>Mon Apr  7 10:15:36 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001499.html">[Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running
</A></li>
        <LI>Next message: <A HREF="001501.html">[Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1500">[ date ]</a>
              <a href="thread.html#1500">[ thread ]</a>
              <a href="subject.html#1500">[ subject ]</a>
              <a href="author.html#1500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>FUJITA Tomonori wrote:
&gt;&gt;&gt;<i> But the old script checks there are two tgtd daemons running. The new
</I>&gt;&gt;&gt;<i> one doesn't. Can you improve the new one to do that?
</I>&gt;&gt;<i> Why tgtd has two daemons (process)?
</I>&gt;<i> 
</I>&gt;<i> One daemon does only logging and another (the main daemon) does the
</I>&gt;<i> rest. Two daemons use shared memory.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> When running tgtd with -f flag it has only one process,
</I>&gt;&gt;<i> why is it?
</I>&gt;<i> 
</I>&gt;<i> It's just for debugging.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> So if I'll check for two process the script will exit.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Note that one of the two tgtd daemons could die due to a bug.
</I>&gt;&gt;<i> When does it happen?
</I>&gt;<i> 
</I>&gt;<i> It happens when we put a bug to the main daemon.
</I>
For conclusion, we can check if there are two process
running but then if some one use tgtd with -f flag the
script will not work.

On the other hand, we can check if such process exists
(without checking the amount of process).
This way, the script will work on both cases but
won't catch the bug on the main daemon (if exist).

Which solution should we use?



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001499.html">[Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running
</A></li>
	<LI>Next message: <A HREF="001501.html">[Stgt-devel] [PATCH] in tgt-setup-lun: fix check if tgtd daemon is	running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1500">[ date ]</a>
              <a href="thread.html#1500">[ thread ]</a>
              <a href="subject.html#1500">[ subject ]</a>
              <a href="author.html#1500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
