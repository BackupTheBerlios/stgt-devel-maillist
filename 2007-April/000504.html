<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] vtl patch.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20vtl%20patch.&In-Reply-To=%3Cf29db9a80704041656y106cff54y2d67b69527df22a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000546.html">
   <LINK REL="Next"  HREF="000506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] vtl patch.</H1>
    <B>Mark Harvey</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20vtl%20patch.&In-Reply-To=%3Cf29db9a80704041656y106cff54y2d67b69527df22a%40mail.gmail.com%3E"
       TITLE="[Stgt-devel] vtl patch.">markh794 at gmail.com
       </A><BR>
    <I>Thu Apr  5 01:56:10 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000546.html">[Stgt-devel] ibmvio - rdma error
</A></li>
        <LI>Next message: <A HREF="000506.html">[Stgt-devel] vtl patch.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#504">[ date ]</a>
              <a href="thread.html#504">[ thread ]</a>
              <a href="subject.html#504">[ subject ]</a>
              <a href="author.html#504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Apologies for this being an attachment. It is rather large to include
inline (57k).

Follow up to feedback from earlier postings, I have implemented the following:


This patch includes the following changes.

- Patch to tgtadm so multiple '--name, --value' arguments can be passed.
- Add device_shutdown() &amp; device_config() to device_type_template
- Unprocessed '--name, --value' arguments are passed to
device_config() in each device template to process.
- smc &amp; ssc 'modules' (INQUIRY cmd implemented - more to come)

- Updated documentation in doc/README.vtl

NOTE: Many of the features in the doc/README.vtl are not implemented
and are included for comment. Better syntax ideas welcome.

Output from &quot;tgtadm --lld iscsi --mode target --op show&quot;
Target 1: iqn.2007-03:marks-vtl_smc:laptop
    System information:
        Type: changer
        Driver: iscsi
        Status: running
    I_T nexus information:
    LUN information:
        LUN: 0
            SCSI ID: deadbeaf1:0
            SCSI SN: XYZZY
            Size: 0
            Backing store: /dev/null
    Account information:
    ACL information:
        ALL
Target 2: iqn.2007-03:marks-vtl_ssc:laptop
    System information:
        Type: tape
        Driver: iscsi
        Status: running
    I_T nexus information:
    LUN information:
        LUN: 0
            SCSI ID: deadbeaf2:0
            SCSI SN: XYZZY10
            Size: 0
            Backing store: /dev/null
        LUN: 1
            SCSI ID: deadbeaf2:1
            SCSI SN: XYZZY11
            Size: 0
            Backing store: /dev/null
        LUN: 2
            SCSI ID: deadbeaf2:2
            SCSI SN: XYZZY12
            Size: 0
            Backing store: /dev/null
    Account information:
    ACL information:
        ALL

And &quot;# lsscsi -g&quot;
[0:0:0:0]    tape    QUANTUM  SDLT600          0010  /dev/st0  /dev/sg0
[0:0:0:1]    tape    IBM      ULT3580-TD3      0010  /dev/st1  /dev/sg1
[0:0:0:2]    tape    SONY     SDX-900V         0010  /dev/st2  /dev/sg2
[1:0:0:0]    mediumx IET      VIRTUAL-CHANGER  0     -         /dev/sg3

Cheers
Mark Harvey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vtl-2007-4-5.diff
Type: text/x-patch
Size: 58213 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/stgt-devel/attachments/20070405/d13cfb5c/attachment.bin">https://lists.berlios.de/pipermail/stgt-devel/attachments/20070405/d13cfb5c/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000546.html">[Stgt-devel] ibmvio - rdma error
</A></li>
	<LI>Next message: <A HREF="000506.html">[Stgt-devel] vtl patch.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#504">[ date ]</a>
              <a href="thread.html#504">[ thread ]</a>
              <a href="subject.html#504">[ subject ]</a>
              <a href="author.html#504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
