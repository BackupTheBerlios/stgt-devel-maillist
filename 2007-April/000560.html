<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Stgt-devel] VTL patch, take 2
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/stgt-devel/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20VTL%20patch%2C%20take%202&In-Reply-To=%3Cf29db9a80704121520p29f6bec7p8895205a51369c8d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000559.html">
   <LINK REL="Next"  HREF="000581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Stgt-devel] VTL patch, take 2</H1>
    <B>Mark Harvey</B> 
    <A HREF="mailto:stgt-devel%40lists.berlios.de?Subject=Re%3A%20%5BStgt-devel%5D%20VTL%20patch%2C%20take%202&In-Reply-To=%3Cf29db9a80704121520p29f6bec7p8895205a51369c8d%40mail.gmail.com%3E"
       TITLE="[Stgt-devel] VTL patch, take 2">markh794 at gmail.com
       </A><BR>
    <I>Fri Apr 13 00:20:40 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000559.html">[Stgt-devel] VTL patch, take 2
</A></li>
        <LI>Next message: <A HREF="000581.html">[Stgt-devel] VTL patch, take 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#560">[ date ]</a>
              <a href="thread.html#560">[ thread ]</a>
              <a href="subject.html#560">[ subject ]</a>
              <a href="author.html#560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/13/07, Douglas Gilbert &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">dougg at torque.net</A>&gt; wrote:
&gt;<i> Mark Harvey wrote:
</I>&gt;<i> &gt; SSC / SMC patches to SCSI Tgt code.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It is based from git commit :
</I>&gt;<i> &gt;   ================================
</I>&gt;<i> &gt; commit 47e15c234ca298d31b1709db592eef9db4bce0ca
</I>&gt;<i> &gt; Author: Albert Pauw &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">albert.pauw at gmail.com</A>&gt;
</I>&gt;<i> &gt; Date:   Sat Apr 7 17:31:54 2007 +0900
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    some shortcut options missing from tgtadm
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    Signed-off-by: Albert Pauw &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/stgt-devel">albert.pauw at gmail.com</A>&gt;
</I>&gt;<i> &gt;   ================================
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Additions from last patch include :
</I>&gt;<i> &gt; - Updated syntax to add/configure limited set of SMC / SSC parameters
</I>&gt;<i> &gt; - Start implementing structures for MODE SELECT / MODE SENSE op codes
</I>&gt;<i> &gt; - Start implementing structures for LOG SELECT / LOG SENSE op codes
</I>&gt;<i>
</I>&gt;<i> It will be interesting to see how you go with MODE SELECT
</I>&gt;<i> and LOG SELECT. As far as I can see it requires the SCSI
</I>&gt;<i> parser to:
</I>&gt;<i>   a) decode the &quot;parameter list length&quot; field in the
</I>&gt;<i>      cdb
</I>&gt;<i>   b) go away and fetch that much data from the data_out
</I>&gt;<i>   c) return to parser and process the parameter list
</I>&gt;<i>      together with other fields in the cdb
</I>&gt;<i>
</I>&gt;<i> In the case of the SAS and FCP transports, step b)
</I>&gt;<i> probably means going all the way back to the
</I>&gt;<i> initiator (low level details: the target sends a XFER_RDY
</I>&gt;<i> frame to entice the initiator to send the data_out buffer).
</I>&gt;<i> There may be less work involved with iSCSI and SRP.
</I>&gt;<i>
</I>&gt;<i> Folks who want persistent reservations will also want
</I>&gt;<i> this problem solved as PERSISTENT RESERVE OUT has the
</I>&gt;<i> same structure as MODE SELECT.
</I>&gt;<i>
</I>&gt;<i> Doug Gilbert
</I>&gt;<i>
</I>
I'll let you know how I go..

It will either be tomorrow, or a little over a week. (Taking a weeks
break from computers, and taking the family on holidays :)

I managed to get this working without too much problems with the Intel
iSCSI reference code.. So the iSCSI initiator is doing the 'right
thing'

Cheers
Mark

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000559.html">[Stgt-devel] VTL patch, take 2
</A></li>
	<LI>Next message: <A HREF="000581.html">[Stgt-devel] VTL patch, take 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#560">[ date ]</a>
              <a href="thread.html#560">[ thread ]</a>
              <a href="subject.html#560">[ subject ]</a>
              <a href="author.html#560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/stgt-devel">More information about the Stgt-devel
mailing list</a><br>
</body></html>
